---
interface Props {
	base: string;
}

const { base } = Astro.props;
---

<section class="landing-section" id="pillars">
	<div class="landing-section__inner">
		<span class="landing-section__label reveal">What It Does</span>
		<h2 class="pillars__heading reveal">Four Pillars</h2>
		<div class="pillars__grid">
			<div class="pillar reveal reveal-d1">
				<div class="pillar__number">01</div>
				<h3 class="pillar__heading">Stop Scraping. Start Querying.</h3>
				<p class="pillar__subtitle">AI-Native Data API</p>
				<p class="pillar__desc">
					Traditional AI tools ingest entire repos. <code class="pillar__code">process-api</code>
					feeds curated JSON or text directly to the agent. One call for scope validation, one for a
					curated context bundle &mdash; dependency trees, architectural impact, deliverables. Zero
					hallucination. 5x fewer tokens.
				</p>
			</div>

			<div class="pillar reveal reveal-d2">
				<div class="pillar__number">02</div>
				<h3 class="pillar__heading">Immutable Delivery Rules</h3>
				<p class="pillar__subtitle">FSM-Enforced Process Guard</p>
				<p class="pillar__desc">
					Documentation guidelines are ignored; state machines are enforced. A rigid FSM
					(<code class="pillar__code">roadmap</code> &rarr; <code class="pillar__code">active</code>
					&rarr; <code class="pillar__code">completed</code>) lives in your codebase, validated by a
					Decider-pattern pre-commit hook. Active specs are scope-locked; completed features cannot
					be modified without an auditable unlock reason.
				</p>
			</div>

			<div class="pillar reveal reveal-d3">
				<div class="pillar__number">03</div>
				<h3 class="pillar__heading">Dual-Source Truth</h3>
				<p class="pillar__subtitle">Four-Stage Pipeline</p>
				<p class="pillar__desc">
					TypeScript owns runtime relationships &mdash; <code class="pillar__code">uses</code>,
					<code class="pillar__code">used-by</code>, <code class="pillar__code">category</code>.
					Gherkin owns planning constraints &mdash; <code class="pillar__code">status</code>,
					<code class="pillar__code">phase</code>, <code class="pillar__code">depends-on</code>.
					Neither duplicates the other. The four-stage pipeline merges both into a unified
					MasterDataset, and anti-pattern validators ensure the boundary is never crossed.
				</p>
			</div>

			<div class="pillar reveal reveal-d4">
				<div class="pillar__number">04</div>
				<h3 class="pillar__heading">Codec-Driven Living Documents</h3>
				<p class="pillar__subtitle">Progressive Disclosure &amp; Rich Relationships</p>
				<p class="pillar__desc">
					20 Zod-validated codecs transform one annotation set into rich Markdown for humans and
					token-efficient modules for AI. Relationship tags &mdash;
					<code class="pillar__code">uses</code>, <code class="pillar__code">used-by</code>,
					<code class="pillar__code">implements</code>, <code class="pillar__code">depends-on</code>
					&mdash; materialise into live Mermaid architecture diagrams scoped by
					<code class="pillar__code">arch-context</code> or
					<code class="pillar__code">arch-layer</code>. Six diagram types, auto-extracted TypeScript
					shapes, Definition of Done traceability matrices. One source. Two audiences. Zero
					duplication.
				</p>
			</div>
		</div>
	</div>
</section>

<style>
	.pillar__code {
		font-family: var(--dp-font-mono);
		font-size: 0.85em;
		color: var(--dp-text-primary);
	}
</style>
