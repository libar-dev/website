/* ================================================================
   STARLIGHT OVERRIDES — Bridge design tokens to Starlight variables

   IMPORTANT: This file is unlayered CSS. Starlight ships all its
   default variables inside @layer starlight.base, which means our
   unlayered rules always win in the cascade regardless of specificity.
   Every rule here overrides Starlight's defaults unconditionally.

   Key: Starlight dark mode = :root (no data-theme)
        Starlight light mode = :root[data-theme='light']
   This is the OPPOSITE of tokens.css convention (where :root = light).
   So we cannot use var(--dp-*) for bg/text — resolve values directly.
   ================================================================ */

:root {
	/* Fonts */
	--sl-font: var(--dp-font-body);
	--sl-font-mono: var(--dp-font-mono);

	/* Accent — dark mode */
	--sl-color-accent-low: #3d1a08;
	--sl-color-accent: #e8530e;
	--sl-color-accent-high: #f5a580;

	/* Gray scale — dark mode
	   Starlight expects: 1=lightest (text/headings) → 7=darkest (near bg)
	   --sl-color-text = var(--sl-color-gray-2) */
	--sl-color-gray-1: #f5f3f0;
	--sl-color-gray-2: #e0ddd8;
	--sl-color-gray-3: #b5a898;
	--sl-color-gray-4: #777777;
	--sl-color-gray-5: #333333;
	--sl-color-gray-6: #1a1a1a;
	--sl-color-gray-7: #0c0c0c;

	/* Backgrounds — dark mode (resolved directly, not via --dp-* tokens) */
	--sl-color-bg: #0c0c0c;
	--sl-color-bg-sidebar: #161616;
	--sl-color-bg-nav: #0c0c0c;
	--sl-color-hairline-shade: #222222;

	/* Inline code — subtle dark surface (not full black) */
	--sl-color-bg-inline-code: #1a1a1a;
}

:root[data-theme='dark'] {
	/* Accent — dark mode (explicit for when html carries data-theme="dark") */
	--sl-color-accent-low: #3d1a08;
	--sl-color-accent: #e8530e;
	--sl-color-accent-high: #f5a580;

	/* Gray scale — same as :root dark defaults */
	--sl-color-gray-1: #f5f3f0;
	--sl-color-gray-2: #e0ddd8;
	--sl-color-gray-3: #b5a898;
	--sl-color-gray-4: #777777;
	--sl-color-gray-5: #333333;
	--sl-color-gray-6: #1a1a1a;
	--sl-color-gray-7: #0c0c0c;

	/* Backgrounds */
	--sl-color-bg: #0c0c0c;
	--sl-color-bg-sidebar: #161616;
	--sl-color-bg-nav: #0c0c0c;
	--sl-color-hairline-shade: #222222;

	/* Inline code — subtle dark surface */
	--sl-color-bg-inline-code: #1a1a1a;
}

:root[data-theme='light'] {
	/* Accent — light mode */
	--sl-color-accent-low: #fce8de;
	--sl-color-accent: #e8530e;
	--sl-color-accent-high: #7a2c07;

	/* Gray scale — light mode
	   Starlight expects: 1=darkest (text/headings) → 7=lightest (near bg)
	   --sl-color-text = var(--sl-color-gray-2) */
	--sl-color-gray-1: #1a1a1a;
	--sl-color-gray-2: #333333;
	--sl-color-gray-3: #555555;
	--sl-color-gray-4: #777777;
	--sl-color-gray-5: #b5a898;
	--sl-color-gray-6: #e0ddd8;
	--sl-color-gray-7: #f5f3f0;

	/* Backgrounds — light mode */
	--sl-color-bg: #ffffff;
	--sl-color-bg-sidebar: #f5f3f0;
	--sl-color-bg-nav: #ffffff;
	--sl-color-hairline-shade: #e0ddd8;

	/* Inline code — warm surface tint matching the design palette */
	--sl-color-bg-inline-code: #eae7e2;
}

/* ── Inline code in headings — no background chip, just mono font ── */
.sl-markdown-content :is(h1, h2, h3, h4, h5, h6) code {
	background-color: transparent;
	padding: 0;
	margin: 0;
	color: inherit;
}

/* ── Card overrides — monochromatic Swiss Constructivist ── */
.card {
	border-color: var(--sl-color-gray-5);
	background-color: var(--sl-color-bg);
}
:root[data-theme='light'] .card {
	border-color: #e0ddd8;
	background-color: #f5f3f0;
}
/* Neutralize colorful icon backgrounds (defensive, if icons are added back) */
.card .icon {
	border-color: var(--sl-color-gray-4);
	background-color: transparent;
}

/* ── Sharp corners — Swiss Constructivist flat design ── */

/* Sidebar active page link (the rounded orange pill) */
a[aria-current='page'],
a[aria-current='true'] {
	border-radius: 0;
}

/* Pagination prev/next nav cards */
.pagination-links a {
	border-radius: 0;
	box-shadow: none;
}

/* Search button and dialog */
[data-open-modal],
site-search dialog,
site-search input[type='search'] {
	border-radius: 0;
}

/* Tab controls */
starlight-tabs [role='tab'] {
	border-radius: 0;
}

/* Aside / callout boxes */
.starlight-aside {
	border-radius: 0;
}

/* Cards */
.card {
	border-radius: 0;
	box-shadow: none;
}

/* ================================================================
   DOC/LANDING ALIGNMENT — Bridge the landing page visual grammar
   into Starlight docs: Bebas Neue headings, structural orange,
   1px separator patterns, refined sidebar active state.
   ================================================================ */

/* ── Heading typography — Bebas Neue to match landing page voice ── */

/* Page title (PageTitle.astro renders outside .sl-markdown-content) */
main h1 {
	font-family: var(--dp-font-display);
	font-weight: 400;
	text-transform: uppercase;
	letter-spacing: 0.04em;
	line-height: 1.1;
}

/* H2 + H3 section headers — Bebas Neue + structural orange left border
   (Tutorial pages use ### for all numbered sections like "6.2 Generate …") */
.sl-markdown-content h2,
.sl-markdown-content h3 {
	font-family: var(--dp-font-display);
	font-weight: 400;
	text-transform: uppercase;
	letter-spacing: 0.04em;
	line-height: 1.1;
	border-inline-start: 2px solid var(--sl-color-accent);
	padding-inline-start: 14px;
	margin-top: 2.5rem;
}

.sl-markdown-content h2 {
	font-size: clamp(1.4rem, 2.5vw, 1.9rem);
}

.sl-markdown-content h3 {
	font-size: clamp(1.1rem, 2vw, 1.4rem);
}

/* ── Sidebar active link — left-border accent (replaces full orange block) ── */

/* Note: border-radius: 0 is already set above — this extends that rule */
a[aria-current='page'],
a[aria-current='true'] {
	background-color: rgba(232, 83, 14, 0.08) !important;
	color: var(--sl-color-accent) !important;
	border-inline-start: 2px solid var(--sl-color-accent);
	padding-inline-start: calc(var(--sl-sidebar-item-padding-inline) - 2px);
	font-weight: 600;
}

a[aria-current='page']:hover,
a[aria-current='true']:hover {
	background-color: rgba(232, 83, 14, 0.12) !important;
	color: var(--sl-color-accent) !important;
}

/* ── Tables — row separators + mono uppercase headers ── */

.sl-markdown-content table {
	width: 100%;
	border-collapse: collapse;
}

.sl-markdown-content thead th {
	font-family: var(--dp-font-mono);
	font-size: 0.72rem;
	font-weight: 400;
	letter-spacing: 0.08em;
	text-transform: uppercase;
	color: var(--sl-color-gray-3);
	border-bottom: 1px solid var(--sl-color-gray-5);
	padding-block: 0.6rem;
	padding-inline: 0.75rem;
	text-align: left;
}

.sl-markdown-content tbody tr {
	border-bottom: 1px solid var(--sl-color-hairline-shade);
}

.sl-markdown-content tbody td {
	padding-block: 0.6rem;
	padding-inline: 0.75rem;
	vertical-align: top;
}

/* ── Inline code — stronger contrast in light mode ── */

:root[data-theme='light'] {
	--sl-color-bg-inline-code: #d5d0c9;
}

:root[data-theme='light'] .sl-markdown-content :not(h1, h2, h3, h4, h5, h6) > code {
	border: 1px solid #c0bbb4;
}

/* ── ExpressiveCode — flat/borderless treatment ── */

/* EC computes border-radius as calc(--ec-brdRad + --ec-brdWd) and border as
   var(--ec-brdWd) solid var(--ec-brdCol). Zeroing --ec-brdWd eliminates both
   the border AND the unwanted 1px corner radius in one shot. These are scoped
   to .expressive-code, so they override the :root values via higher specificity. */
.expressive-code {
	--ec-brdWd: 0px;
	--ec-brdRad: 0px;
}

/* Hide the decorative macOS three-dots chrome on terminal-style blocks.
   It's non-functional and conflicts with the flat Swiss Constructivist aesthetic. */
.expressive-code .frame.is-terminal .header {
	display: none;
}

/* Hide scrollbar track at bottom of code blocks */
.expressive-code pre {
	scrollbar-width: none;
}
.expressive-code pre::-webkit-scrollbar {
	display: none;
}

/* ── Mermaid diagram container — flat, no rounded corners, no bg tint ── */
/* astro-mermaid injects styles via JS that add border-radius + bg tint;
   !important is required to override dynamically injected rules */
pre.mermaid,
pre.mermaid[data-processed] {
	border-radius: 0 !important;
	background-color: transparent !important;
	border: none !important;
	min-height: 0 !important;
}

/* ── Mermaid diagram nodes — design palette colors ── */
/* Best-effort: targets SVG class selectors. Inline fill attributes from Mermaid's
   default theme may take precedence; configure mermaid() initialize options in
   astro.config.mjs as a follow-up if these don't fully override. */

/* Dark mode (Starlight :root = dark by default) */
pre.mermaid .node rect,
pre.mermaid .node circle,
pre.mermaid .node ellipse,
pre.mermaid .node polygon,
pre.mermaid .cluster rect {
	fill: #1a1a1a !important;
	stroke: #333333 !important;
}

pre.mermaid .label,
pre.mermaid .nodeLabel,
pre.mermaid .edgeLabel {
	color: #d4cdc4 !important;
}

pre.mermaid .edgePath .path,
pre.mermaid .flowchart-link {
	stroke: #3a3530 !important;
}

pre.mermaid .arrowheadPath {
	fill: #3a3530 !important;
	stroke: none !important;
}

/* Light mode */
:root[data-theme='light'] pre.mermaid .node rect,
:root[data-theme='light'] pre.mermaid .node circle,
:root[data-theme='light'] pre.mermaid .node ellipse,
:root[data-theme='light'] pre.mermaid .node polygon,
:root[data-theme='light'] pre.mermaid .cluster rect {
	fill: #f5f3f0 !important;
	stroke: #b5a898 !important;
}

:root[data-theme='light'] pre.mermaid .label,
:root[data-theme='light'] pre.mermaid .nodeLabel,
:root[data-theme='light'] pre.mermaid .edgeLabel {
	color: #333333 !important;
}

:root[data-theme='light'] pre.mermaid .edgePath .path,
:root[data-theme='light'] pre.mermaid .flowchart-link {
	stroke: #b5a898 !important;
}

:root[data-theme='light'] pre.mermaid .arrowheadPath {
	fill: #b5a898 !important;
	stroke: none !important;
}
